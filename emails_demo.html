<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarify.RE - Email Processing Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS Variables - Dark Mode Theme
           ======================================== */
        :root {
            --color-primary: #ff25bd;
            --color-primary-dark: #e01ba6;
            --color-primary-light: #ff5cd0;
            --color-secondary: #3b82f6;
            --color-accent: #34d399;
            --color-accent-light: #6ee7b7;
            --color-warning: #f59e0b;
            --color-error: #ef4444;

            --color-white: #0a0a0f;
            --color-gray-50: #0f0f14;
            --color-gray-100: #151519;
            --color-gray-200: #1e1e24;
            --color-gray-300: #2a2a32;
            --color-gray-400: #52525b;
            --color-gray-500: #71717a;
            --color-gray-600: #a1a1aa;
            --color-gray-700: #d4d4d8;
            --color-gray-800: #e4e4e7;
            --color-gray-900: #fafafa;

            --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #ff25bd 100%);
            --gradient-dark: linear-gradient(135deg, #0f0f14 0%, #0a0a0f 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);

            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --radius-2xl: 32px;
            --radius-full: 9999px;

            --shadow-glow: 0 0 40px rgba(255, 37, 189, 0.3);
            --shadow-glow-blue: 0 0 40px rgba(59, 130, 246, 0.3);
            --shadow-glow-green: 0 0 40px rgba(52, 211, 153, 0.3);
        }

        /* Reset & Base */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 16px;
            line-height: 1.6;
            color: var(--color-gray-700);
            background-color: var(--color-white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ========================================
           Navigation (Simplified)
           ======================================== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--color-gray-200);
            padding: 1rem 2rem;
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-text {
            font-family: 'Outfit', sans-serif;
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--color-gray-900);
        }

        .logo-accent {
            color: var(--color-primary);
        }

        .demo-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 37, 189, 0.1);
            border: 1px solid rgba(255, 37, 189, 0.3);
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .demo-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--color-primary);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        /* ========================================
           Main Demo Container
           ======================================== */
        .demo-container {
            padding-top: 80px;
            min-height: 100vh;
            background:
                radial-gradient(ellipse at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(255, 37, 189, 0.1) 0%, transparent 50%),
                var(--color-white);
        }

        .demo-header {
            text-align: center;
            padding: 3rem 2rem 2rem;
        }

        .demo-header h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            color: var(--color-gray-900);
            margin-bottom: 1rem;
        }

        .gradient-text {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .demo-header p {
            font-size: 1.125rem;
            color: var(--color-gray-600);
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Control Buttons */
        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            font-size: 0.9375rem;
            font-weight: 600;
            border-radius: var(--radius-lg);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: #ffffff;
            box-shadow: 0 4px 14px rgba(255, 37, 189, 0.4);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 37, 189, 0.5);
        }

        .btn-primary:disabled {
            opacity: 0.7;
            cursor: wait;
        }

        #playIcon { display: none; }
        #loadingIcon { display: block; }

        .btn-primary:not(:disabled) #playIcon { display: block; }
        .btn-primary:not(:disabled) #loadingIcon { display: none; }

        .spin {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: var(--color-gray-700);
            border: 1px solid var(--color-gray-300);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--color-gray-400);
        }

        /* ========================================
           Animation Stage
           ======================================== */
        .animation-stage {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            min-height: 700px;
        }

        /* Flow Diagram */
        .flow-container {
            display: grid;
            grid-template-columns: 1fr 80px 1fr 80px 1fr 80px 1fr;
            align-items: center;
            gap: 1rem;
            margin-bottom: 3rem;
        }

        .flow-step {
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-xl);
            padding: 1.5rem;
            text-align: center;
            opacity: 0.4;
            transform: scale(0.95);
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .flow-step.active {
            opacity: 1;
            transform: scale(1);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-glow);
        }

        .flow-step.completed {
            opacity: 1;
            transform: scale(1);
            border-color: var(--color-accent);
        }

        .flow-step-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 1rem;
            background: var(--gradient-primary);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flow-step-icon svg {
            width: 28px;
            height: 28px;
            color: white;
        }

        .flow-step h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-gray-900);
            margin-bottom: 0.5rem;
        }

        .flow-step p {
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }

        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-gray-400);
            opacity: 0.3;
            transition: all 0.5s ease;
        }

        .flow-arrow.active {
            opacity: 1;
            color: var(--color-primary);
        }

        .flow-arrow svg {
            width: 32px;
            height: 32px;
            animation: none;
        }

        .flow-arrow.active svg {
            animation: arrowPulse 1s infinite;
        }

        @keyframes arrowPulse {
            0%, 100% { transform: translateX(0); opacity: 1; }
            50% { transform: translateX(5px); opacity: 0.7; }
        }

        /* ========================================
           Main Visual Area
           ======================================== */
        .visual-area {
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 2rem;
            min-height: 500px;
        }

        /* Email Preview Panel */
        .email-panel {
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-xl);
            overflow: hidden;
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .email-panel.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .panel-header {
            background: var(--color-gray-200);
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--color-gray-300);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .panel-dots {
            display: flex;
            gap: 6px;
        }

        .panel-dots span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--color-gray-400);
        }

        .panel-dots span:first-child { background: #ef4444; }
        .panel-dots span:nth-child(2) { background: #f59e0b; }
        .panel-dots span:last-child { background: #22c55e; }

        .panel-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-gray-600);
        }

        .email-content {
            padding: 1.25rem;
        }

        .email-meta {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-gray-300);
        }

        .email-from, .email-to, .email-subject {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
            font-size: 0.8125rem;
        }

        .email-label {
            color: var(--color-gray-500);
            min-width: 60px;
        }

        .email-value {
            color: var(--color-gray-800);
            font-weight: 500;
        }

        .email-subject .email-value {
            font-weight: 700;
            color: var(--color-gray-900);
        }

        .email-attachment {
            background: var(--color-gray-200);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-md);
            padding: 0.875rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .attachment-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .attachment-info {
            flex: 1;
        }

        .attachment-name {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--color-gray-900);
        }

        .attachment-size {
            font-size: 0.75rem;
            color: var(--color-gray-500);
        }

        /* eContracts Email Styles */
        .econtracts-header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            margin: -1.25rem -1.25rem 1rem -1.25rem;
            padding: 0.875rem 1.25rem;
            border-radius: 0;
        }

        .econtracts-logo {
            font-size: 1rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 0.02em;
        }

        .econtracts-message {
            background: var(--color-gray-200);
            border-radius: var(--radius-md);
            padding: 0.875rem;
            margin-bottom: 1rem;
        }

        .message-from {
            font-size: 0.8125rem;
            color: var(--color-gray-700);
            margin-bottom: 0.375rem;
        }

        .message-brokerage {
            font-size: 0.75rem;
            color: var(--color-gray-600);
            line-height: 1.4;
        }

        .document-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .doc-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.625rem 0.75rem;
            background: var(--color-gray-200);
            border-radius: var(--radius-sm);
            gap: 0.5rem;
        }

        .doc-name {
            font-size: 0.6875rem;
            font-weight: 500;
            color: var(--color-gray-700);
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .doc-status {
            font-size: 0.625rem;
            font-weight: 600;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            white-space: nowrap;
        }

        .doc-status.ready {
            background: rgba(59, 130, 246, 0.15);
            color: var(--color-secondary);
        }

        .doc-status.signed {
            background: rgba(52, 211, 153, 0.15);
            color: var(--color-accent);
        }

        .doc-status.download {
            background: rgba(255, 37, 189, 0.15);
            color: var(--color-primary);
        }

        /* Central Processing Area */
        .processing-area {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .processing-visual {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
        }

        /* Animated Document */
        .document-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 150px;
            background: var(--color-gray-100);
            border: 2px solid var(--color-gray-300);
            border-radius: var(--radius-lg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .document-animation.visible {
            opacity: 1;
        }

        .document-animation.scanning {
            animation: docScan 2s ease-in-out infinite;
        }

        @keyframes docScan {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 37, 189, 0.4); }
            50% { box-shadow: 0 0 30px 10px rgba(255, 37, 189, 0.2); }
        }

        .doc-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 0.5rem;
            color: var(--color-gray-500);
        }

        .doc-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-gray-600);
        }

        /* Scanning Line */
        .scan-line {
            position: absolute;
            top: 0;
            left: 10%;
            right: 10%;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 2px;
            opacity: 0;
            box-shadow: 0 0 20px rgba(255, 37, 189, 0.8);
        }

        .scan-line.active {
            opacity: 1;
            animation: scanMove 2s ease-in-out infinite;
        }

        @keyframes scanMove {
            0% { top: 5%; }
            50% { top: 90%; }
            100% { top: 5%; }
        }

        /* AI Processing Rings */
        .ai-rings {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .ai-rings.visible {
            opacity: 1;
        }

        .ai-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid transparent;
            border-radius: 50%;
        }

        .ai-ring-1 {
            width: 200px;
            height: 200px;
            border-color: rgba(59, 130, 246, 0.3);
            animation: ringRotate 8s linear infinite;
        }

        .ai-ring-2 {
            width: 250px;
            height: 250px;
            border-color: rgba(255, 37, 189, 0.3);
            animation: ringRotate 12s linear infinite reverse;
        }

        .ai-ring-3 {
            width: 300px;
            height: 300px;
            border-color: rgba(52, 211, 153, 0.2);
            animation: ringRotate 16s linear infinite;
        }

        @keyframes ringRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* AI Dots on rings */
        .ai-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .ai-ring-1 .ai-dot {
            background: var(--color-secondary);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.8);
            top: 0;
            left: 50%;
        }

        .ai-ring-2 .ai-dot {
            background: var(--color-primary);
            box-shadow: 0 0 15px rgba(255, 37, 189, 0.8);
            top: 50%;
            right: -6px;
            left: auto;
        }

        /* AI Labels */
        .ai-labels {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 350px;
            height: 350px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .ai-labels.visible {
            opacity: 1;
        }

        .ai-label {
            position: absolute;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .ai-label-claude {
            top: 10%;
            right: 0;
            color: var(--color-secondary);
            border-color: rgba(59, 130, 246, 0.3);
            animation: labelFloat 3s ease-in-out infinite;
        }

        .ai-label-gpt {
            bottom: 10%;
            left: 0;
            color: var(--color-primary);
            border-color: rgba(255, 37, 189, 0.3);
            animation: labelFloat 3s ease-in-out infinite 1.5s;
        }

        @keyframes labelFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .ai-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        .ai-label-claude .ai-indicator {
            background: var(--color-secondary);
        }

        .ai-label-gpt .ai-indicator {
            background: var(--color-primary);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Processing Status */
        .processing-status {
            margin-top: 2rem;
            text-align: center;
        }

        .status-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-gray-700);
            margin-bottom: 0.75rem;
            min-height: 1.5em;
        }

        .status-bar {
            width: 280px;
            height: 6px;
            background: var(--color-gray-300);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin: 0 auto;
        }

        .status-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Results Panel */
        .results-panel {
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-xl);
            overflow: hidden;
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .results-panel.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .results-content {
            padding: 1.25rem;
        }

        /* Extracted Data */
        .extracted-data {
            margin-bottom: 1.5rem;
        }

        .data-section-title {
            font-size: 0.6875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-gray-500);
            margin-bottom: 0.75rem;
        }

        .data-grid {
            display: grid;
            gap: 0.625rem;
        }

        .data-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.625rem 0.875rem;
            background: var(--color-gray-200);
            border-radius: var(--radius-md);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
        }

        .data-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .data-item.highlight {
            animation: dataHighlight 0.5s ease;
        }

        @keyframes dataHighlight {
            0% { background: rgba(59, 130, 246, 0.2); }
            100% { background: var(--color-gray-200); }
        }

        .data-key {
            font-size: 0.75rem;
            color: var(--color-gray-500);
        }

        .data-value {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--color-gray-900);
            text-align: right;
        }

        /* Compliance Findings */
        .compliance-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--color-gray-300);
        }

        .finding-card {
            background: var(--color-gray-200);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-left: 3px solid transparent;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .finding-card.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .finding-card.warning {
            border-left-color: var(--color-warning);
        }

        .finding-card.error {
            border-left-color: var(--color-error);
        }

        .finding-card.success {
            border-left-color: var(--color-accent);
        }

        .finding-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .finding-icon {
            width: 20px;
            height: 20px;
        }

        .finding-icon.warning { color: var(--color-warning); }
        .finding-icon.error { color: var(--color-error); }
        .finding-icon.success { color: var(--color-accent); }

        .finding-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--color-gray-900);
        }

        .finding-description {
            font-size: 0.75rem;
            color: var(--color-gray-600);
            line-height: 1.5;
        }

        .ai-consensus {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px dashed var(--color-gray-300);
        }

        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background: var(--color-gray-100);
            border-radius: var(--radius-sm);
            font-size: 0.625rem;
            font-weight: 600;
        }

        .ai-badge.claude {
            color: var(--color-secondary);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .ai-badge.gpt {
            color: var(--color-primary);
            border: 1px solid rgba(255, 37, 189, 0.3);
        }

        .ai-badge svg {
            width: 10px;
            height: 10px;
        }

        /* Agent Dashboard Preview */
        .dashboard-preview {
            margin-top: 3rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .dashboard-preview.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .dashboard-card {
            background: var(--color-gray-100);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-xl);
            overflow: hidden;
            max-width: 900px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: var(--color-gray-200);
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--color-gray-300);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dashboard-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .dashboard-title h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-gray-900);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-badge.review {
            background: rgba(245, 158, 11, 0.1);
            color: var(--color-warning);
        }

        .status-badge.success {
            background: rgba(52, 211, 153, 0.1);
            color: var(--color-accent);
        }

        .status-badge-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
        }

        .dashboard-body {
            padding: 1.5rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .dashboard-section h4 {
            font-size: 0.8125rem;
            font-weight: 700;
            color: var(--color-gray-600);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .property-card {
            background: var(--color-gray-200);
            border-radius: var(--radius-md);
            padding: 1rem;
        }

        .property-address {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-gray-900);
            margin-bottom: 0.25rem;
        }

        .property-details {
            font-size: 0.8125rem;
            color: var(--color-gray-500);
        }

        .property-price {
            font-size: 1.25rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 0.75rem;
        }

        .compliance-summary {
            display: grid;
            gap: 0.75rem;
        }

        .compliance-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--color-gray-200);
            border-radius: var(--radius-md);
        }

        .compliance-item-icon {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .compliance-item-icon.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--color-warning);
        }

        .compliance-item-icon.success {
            background: rgba(52, 211, 153, 0.1);
            color: var(--color-accent);
        }

        .compliance-item-icon svg {
            width: 18px;
            height: 18px;
        }

        .compliance-item-text {
            flex: 1;
        }

        .compliance-item-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--color-gray-900);
        }

        .compliance-item-desc {
            font-size: 0.75rem;
            color: var(--color-gray-500);
        }

        /* Particles Effect */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--color-primary);
            border-radius: 50%;
            opacity: 0;
        }

        .particle.active {
            animation: particleFly 2s ease-out forwards;
        }

        @keyframes particleFly {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translateY(-100px);
            }
        }

        /* Success Celebration */
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .celebration.active {
            opacity: 1;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        .confetti.active {
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(-100vh) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }

        /* Progress Timeline */
        .timeline-indicator {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 2rem;
        }

        .timeline-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--color-gray-400);
            transition: all 0.3s ease;
        }

        .timeline-dot.active {
            background: var(--color-primary);
            box-shadow: 0 0 10px rgba(255, 37, 189, 0.5);
        }

        .timeline-dot.completed {
            background: var(--color-accent);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .flow-container {
                display: none;
            }

            .visual-area {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .email-panel,
            .results-panel {
                max-width: 100%;
            }

            .processing-visual {
                max-width: 300px;
            }
        }

        @media (max-width: 768px) {
            .demo-header h1 {
                font-size: 1.75rem;
            }

            .demo-controls {
                flex-direction: column;
                align-items: center;
            }

            .dashboard-body {
                grid-template-columns: 1fr;
            }
        }

        /* Code Display */
        .code-preview {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            background: var(--color-gray-50);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-md);
            padding: 1rem;
            overflow-x: auto;
            margin-top: 1rem;
            opacity: 0;
            max-height: 0;
            transition: all 0.5s ease;
        }

        .code-preview.visible {
            opacity: 1;
            max-height: 200px;
        }

        .code-line {
            display: flex;
            gap: 1rem;
        }

        .code-line-number {
            color: var(--color-gray-500);
            user-select: none;
        }

        .code-keyword { color: var(--color-primary); }
        .code-string { color: var(--color-accent); }
        .code-property { color: var(--color-secondary); }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-content">
            <a href="index.html" class="logo">
                <span class="logo-text">Clarify<span class="logo-accent">.RE</span></span>
            </a>
        </div>
    </nav>

    <!-- Demo Container -->
    <div class="demo-container">
        <div class="demo-header">
            <h1>Watch Email Processing <span class="gradient-text">in Action</span></h1>
            <p>See how Clarify.RE automatically processes incoming contracts, extracts data with AI, and checks for compliance issues.</p>

            <div class="demo-controls">
                <button class="btn btn-primary" id="startDemo" disabled>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" id="playIcon">
                        <path d="M6 4L16 10L6 16V4Z" fill="currentColor"/>
                    </svg>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" id="loadingIcon" class="spin">
                        <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="40" stroke-dashoffset="10"/>
                    </svg>
                    <span id="startBtnText">Loading Audio...</span>
                </button>
                <button class="btn btn-secondary" id="resetDemo">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17"/>
                        <path d="M3 10L6 7M3 10L6 13"/>
                    </svg>
                    Reset
                </button>
            </div>
        </div>

        <div class="animation-stage">
            <!-- Flow Steps -->
            <div class="flow-container">
                <div class="flow-step" id="step1">
                    <div class="flow-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            <polyline points="22,6 12,13 2,6"/>
                        </svg>
                    </div>
                    <h3>Email Received</h3>
                    <p>From eContracts</p>
                </div>

                <div class="flow-arrow" id="arrow1">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>

                <div class="flow-step" id="step2">
                    <div class="flow-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </div>
                    <h3>AI Parsing</h3>
                    <p>Extract Details</p>
                </div>

                <div class="flow-arrow" id="arrow2">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>

                <div class="flow-step" id="step3">
                    <div class="flow-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 11l3 3L22 4"/>
                            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                        </svg>
                    </div>
                    <h3>Compliance Check</h3>
                    <p>Dual AI Review</p>
                </div>

                <div class="flow-arrow" id="arrow3">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </div>

                <div class="flow-step" id="step4">
                    <div class="flow-step-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="3" y1="9" x2="21" y2="9"/>
                            <line x1="9" y1="21" x2="9" y2="9"/>
                        </svg>
                    </div>
                    <h3>Dashboard Ready</h3>
                    <p>Review & Act</p>
                </div>
            </div>

            <!-- Visual Area -->
            <div class="visual-area">
                <!-- Email Panel -->
                <div class="email-panel" id="emailPanel">
                    <div class="panel-header">
                        <div class="panel-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <span class="panel-title">Incoming Email</span>
                    </div>
                    <div class="email-content">
                        <div class="email-meta">
                            <div class="email-from">
                                <span class="email-label">From:</span>
                                <span class="email-value">noreply@ctmecontracts.com</span>
                            </div>
                            <div class="email-to">
                                <span class="email-label">To:</span>
                                <span class="email-value">acme-realty-x7k2m@clarify.re</span>
                            </div>
                            <div class="email-subject">
                                <span class="email-label">Subject:</span>
                                <span class="email-value">eContracts for 742 Evergreen Terrace, Springfield IL</span>
                            </div>
                        </div>

                        <!-- eContracts Style Header -->
                        <div class="econtracts-header">
                            <div class="econtracts-logo">CTM eContracts</div>
                        </div>

                        <div class="econtracts-message">
                            <div class="message-from">
                                <strong>New Message from:</strong> Sarah Johnson
                            </div>
                            <div class="message-brokerage">
                                Springfield Premier Realty<br>
                                <span style="color: var(--color-gray-500);">sjohnson@springfieldrealty.com</span>
                            </div>
                        </div>

                        <!-- Document List -->
                        <div class="document-list">
                            <div class="doc-item">
                                <span class="doc-name">CONTRACT TO BUY AND SELL REAL ESTATE</span>
                                <span class="doc-status ready">Signature Ready</span>
                            </div>
                            <div class="doc-item">
                                <span class="doc-name">INSPECTION OBJECTION</span>
                                <span class="doc-status ready">Signature Ready</span>
                            </div>
                            <div class="doc-item">
                                <span class="doc-name">Lead-Based Paint Disclosure</span>
                                <span class="doc-status ready">Signature Ready</span>
                            </div>
                            <div class="doc-item">
                                <span class="doc-name">SELLERS PROPERTY DISCLOSURE</span>
                                <span class="doc-status signed">Signed</span>
                            </div>
                            <div class="doc-item">
                                <span class="doc-name">EarnestMoneyReceipt.pdf</span>
                                <span class="doc-status download">Download</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Processing Area -->
                <div class="processing-area">
                    <div class="processing-visual">
                        <div class="particles" id="particles"></div>

                        <div class="ai-rings" id="aiRings">
                            <div class="ai-ring ai-ring-1"><div class="ai-dot"></div></div>
                            <div class="ai-ring ai-ring-2"><div class="ai-dot"></div></div>
                            <div class="ai-ring ai-ring-3"></div>
                        </div>

                        <div class="ai-labels" id="aiLabels">
                            <div class="ai-label ai-label-claude">
                                <span class="ai-indicator"></span>
                                Claude Analyzing...
                            </div>
                            <div class="ai-label ai-label-gpt">
                                <span class="ai-indicator"></span>
                                ChatGPT Verifying...
                            </div>
                        </div>

                        <div class="document-animation" id="document">
                            <div class="scan-line" id="scanLine"></div>
                            <svg class="doc-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                                <polyline points="10 9 9 9 8 9"/>
                            </svg>
                            <span class="doc-label">Contract.pdf</span>
                        </div>
                    </div>

                    <div class="processing-status">
                        <div class="status-text" id="statusText">Click "Start Demo" to begin</div>
                        <div class="status-bar">
                            <div class="status-fill" id="statusFill"></div>
                        </div>
                    </div>
                </div>

                <!-- Results Panel -->
                <div class="results-panel" id="resultsPanel">
                    <div class="panel-header">
                        <div class="panel-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <span class="panel-title">Extracted Data & Findings</span>
                    </div>
                    <div class="results-content">
                        <div class="extracted-data">
                            <div class="data-section-title">Transaction Details</div>
                            <div class="data-grid" id="dataGrid">
                                <div class="data-item" data-delay="0">
                                    <span class="data-key">Property</span>
                                    <span class="data-value">742 Evergreen Terrace</span>
                                </div>
                                <div class="data-item" data-delay="100">
                                    <span class="data-key">Price</span>
                                    <span class="data-value">$485,000</span>
                                </div>
                                <div class="data-item" data-delay="200">
                                    <span class="data-key">Buyer</span>
                                    <span class="data-value">Homer & Marge Simpson</span>
                                </div>
                                <div class="data-item" data-delay="300">
                                    <span class="data-key">Seller</span>
                                    <span class="data-value">Ned Flanders</span>
                                </div>
                                <div class="data-item" data-delay="400">
                                    <span class="data-key">Closing Date</span>
                                    <span class="data-value">Jan 15, 2025</span>
                                </div>
                                <div class="data-item" data-delay="500">
                                    <span class="data-key">Earnest Money</span>
                                    <span class="data-value">$10,000</span>
                                </div>
                            </div>
                        </div>

                        <div class="compliance-section" id="complianceSection">
                            <div class="data-section-title">Compliance Findings</div>

                            <div class="finding-card warning" id="finding1">
                                <div class="finding-header">
                                    <svg class="finding-icon warning" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="finding-title">Inspection Deadline Missing</span>
                                </div>
                                <p class="finding-description">The inspection contingency deadline is not specified in Section 8.2. This should be defined to protect the buyer's interests.</p>
                                <div class="ai-consensus">
                                    <span class="ai-badge claude">
                                        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                                        Claude
                                    </span>
                                    <span class="ai-badge gpt">
                                        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/></svg>
                                        ChatGPT
                                    </span>
                                    <span style="font-size: 0.625rem; color: var(--color-gray-500); margin-left: auto;">Both AIs agree</span>
                                </div>
                            </div>

                            <div class="finding-card success" id="finding2">
                                <div class="finding-header">
                                    <svg class="finding-icon success" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="finding-title">All Signatures Present</span>
                                </div>
                                <p class="finding-description">All required signatures from buyer, seller, and agents have been verified on the contract.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Dashboard Preview -->
            <div class="dashboard-preview" id="dashboardPreview">
                <div class="dashboard-card">
                    <div class="dashboard-header">
                        <div class="dashboard-title">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <line x1="3" y1="9" x2="21" y2="9"/>
                                <line x1="9" y1="21" x2="9" y2="9"/>
                            </svg>
                            <h3>New Transaction Created</h3>
                        </div>
                        <div class="status-badge review">
                            <span class="status-badge-dot"></span>
                            Needs Review
                        </div>
                    </div>
                    <div class="dashboard-body">
                        <div class="dashboard-section">
                            <h4>Property Details</h4>
                            <div class="property-card">
                                <div class="property-address">742 Evergreen Terrace</div>
                                <div class="property-details">Springfield, IL 62701</div>
                                <div class="property-price">$485,000</div>
                            </div>
                        </div>
                        <div class="dashboard-section">
                            <h4>Action Required</h4>
                            <div class="compliance-summary">
                                <div class="compliance-item">
                                    <div class="compliance-item-icon warning">
                                        <svg viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <div class="compliance-item-text">
                                        <div class="compliance-item-title">1 Issue to Review</div>
                                        <div class="compliance-item-desc">Inspection deadline missing</div>
                                    </div>
                                </div>
                                <div class="compliance-item">
                                    <div class="compliance-item-icon success">
                                        <svg viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <div class="compliance-item-text">
                                        <div class="compliance-item-title">5 Items Verified</div>
                                        <div class="compliance-item-desc">Signatures, dates, parties...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="timeline-indicator" id="timeline">
                <div class="timeline-dot" data-step="1"></div>
                <div class="timeline-dot" data-step="2"></div>
                <div class="timeline-dot" data-step="3"></div>
                <div class="timeline-dot" data-step="4"></div>
            </div>
        </div>
    </div>

    <!-- Celebration Effect -->
    <div class="celebration" id="celebration"></div>

    <!-- Narration Audio -->
    <audio id="narrationAudio" preload="metadata" playsinline>
        <source src="audio/email_to_transaction.wav" type="audio/wav">
    </audio>

    <script>
        // Demo Animation Controller
        class EmailDemo {
            constructor() {
                this.currentStep = 0;
                this.isRunning = false;
                this.audioPlaying = false;
                this.elements = {
                    startBtn: document.getElementById('startDemo'),
                    startBtnText: document.getElementById('startBtnText'),
                    resetBtn: document.getElementById('resetDemo'),
                    emailPanel: document.getElementById('emailPanel'),
                    resultsPanel: document.getElementById('resultsPanel'),
                    document: document.getElementById('document'),
                    scanLine: document.getElementById('scanLine'),
                    aiRings: document.getElementById('aiRings'),
                    aiLabels: document.getElementById('aiLabels'),
                    statusText: document.getElementById('statusText'),
                    statusFill: document.getElementById('statusFill'),
                    dashboardPreview: document.getElementById('dashboardPreview'),
                    particles: document.getElementById('particles'),
                    celebration: document.getElementById('celebration'),
                    narrationAudio: document.getElementById('narrationAudio'),
                    steps: [
                        document.getElementById('step1'),
                        document.getElementById('step2'),
                        document.getElementById('step3'),
                        document.getElementById('step4')
                    ],
                    arrows: [
                        document.getElementById('arrow1'),
                        document.getElementById('arrow2'),
                        document.getElementById('arrow3')
                    ],
                    dataItems: document.querySelectorAll('.data-item'),
                    findings: [
                        document.getElementById('finding1'),
                        document.getElementById('finding2')
                    ],
                    timelineDots: document.querySelectorAll('.timeline-dot')
                };

                this.bindEvents();
                this.initAudioLoading();
            }

            bindEvents() {
                this.elements.startBtn.addEventListener('click', () => this.start());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
            }

            initAudioLoading() {
                const audio = this.elements.narrationAudio;

                // Check if already loaded
                if (audio.readyState >= 3) {
                    this.onAudioReady();
                    return;
                }

                // On mobile, audio often won't preload until user interaction
                // So we use a timeout fallback and enable the button anyway
                const loadTimeout = setTimeout(() => {
                    this.onAudioReady();
                }, 3000);

                // Wait for audio to be ready (works on desktop)
                audio.addEventListener('canplay', () => {
                    clearTimeout(loadTimeout);
                    this.onAudioReady();
                }, { once: true });

                // Handle loading error
                audio.addEventListener('error', () => {
                    clearTimeout(loadTimeout);
                    this.elements.startBtnText.textContent = 'Start Demo';
                    this.elements.startBtn.disabled = false;
                    this.audioAvailable = false;
                }, { once: true });
            }

            onAudioReady() {
                this.elements.startBtnText.textContent = 'Start Demo';
                this.elements.startBtn.disabled = false;
                this.audioAvailable = true;
            }

            async start() {
                if (this.isRunning) return;
                this.isRunning = true;
                this.elements.startBtn.disabled = true;

                // Start narration audio (user interaction enables playback on mobile)
                try {
                    this.elements.narrationAudio.currentTime = 0;
                    await this.elements.narrationAudio.play();
                    this.audioPlaying = true;
                } catch (e) {
                    console.log('Audio playback failed:', e);
                    this.audioPlaying = false;
                }

                // Intro pause - narrator introduces the demo (~8 sec)
                await this.delay(8000);

                await this.step1_emailReceived();  // ~14 sec (8-22)
                await this.delay(1000);
                await this.step2_aiParsing();      // ~20 sec (22-42)
                await this.delay(1000);
                await this.step3_complianceCheck(); // ~20 sec (42-62)
                await this.delay(1000);
                await this.step4_dashboardReady();  // ~13 sec (62-75)

                this.isRunning = false;
                this.elements.startBtn.disabled = false;
            }

            async step1_emailReceived() {
                // ~14 seconds for this step (narration: 8-22 sec)
                this.updateStatus('Receiving email from eContracts...', 10);
                this.activateStep(0);

                await this.delay(2000);
                this.elements.emailPanel.classList.add('visible');
                this.scrollToElement(this.elements.emailPanel);

                await this.delay(3000);
                this.elements.document.classList.add('visible');
                this.updateStatus('Email received - extracting documents...', 20);

                await this.delay(4000);
                this.updateStatus('Contract, disclosures, and attachments detected...', 25);

                await this.delay(4000);
                this.activateArrow(0);
            }

            async step2_aiParsing() {
                // ~20 seconds for this step (narration: 22-42 sec)
                this.activateStep(1);
                this.updateStatus('AI parsing contract document...', 30);

                this.elements.document.classList.add('scanning');
                this.elements.scanLine.classList.add('active');

                await this.delay(2000);
                this.elements.aiRings.classList.add('visible');
                this.elements.aiLabels.classList.add('visible');

                // Animate data extraction with longer delays
                const dataItems = this.elements.dataItems;
                for (let i = 0; i < dataItems.length; i++) {
                    await this.delay(2000);
                    dataItems[i].classList.add('visible', 'highlight');
                    this.updateStatus(`Extracting: ${dataItems[i].querySelector('.data-key').textContent}...`, 30 + (i * 5));
                    this.createParticle();
                }

                await this.delay(2000);
                this.elements.resultsPanel.classList.add('visible');
                this.scrollToElement(this.elements.resultsPanel);
                this.updateStatus('Data extraction complete', 55);

                await this.delay(1500);
                this.elements.scanLine.classList.remove('active');
                this.elements.document.classList.remove('scanning');
                this.activateArrow(1);
            }

            async step3_complianceCheck() {
                // ~20 seconds for this step (narration: 42-62 sec)
                this.activateStep(2);
                this.updateStatus('Running dual AI compliance check...', 60);

                await this.delay(3000);
                this.updateStatus('Claude analyzing contract terms...', 65);

                await this.delay(4000);
                this.updateStatus('ChatGPT verifying findings...', 72);

                await this.delay(4000);

                // Show findings
                this.elements.findings[0].classList.add('visible');
                this.updateStatus('Issue found: Inspection deadline missing', 80);
                this.createParticle();

                await this.delay(4000);
                this.elements.findings[1].classList.add('visible');
                this.updateStatus('Verification complete: Signatures validated', 88);

                await this.delay(3000);
                this.activateArrow(2);
            }

            async step4_dashboardReady() {
                // ~13 seconds for this step (narration: 62-75 sec)
                this.activateStep(3);
                this.updateStatus('Creating transaction in dashboard...', 92);

                await this.delay(3000);
                this.elements.dashboardPreview.classList.add('visible');
                this.scrollToElement(this.elements.dashboardPreview);
                this.updateStatus('Transaction ready for review!', 100);

                // Wait for audio to finish before celebrating
                await this.waitForAudioEnd();
                this.celebrate();
            }

            waitForAudioEnd() {
                return new Promise(resolve => {
                    // If audio isn't playing (failed on mobile or error), resolve immediately
                    if (!this.audioPlaying) {
                        resolve();
                        return;
                    }

                    const audio = this.elements.narrationAudio;
                    if (audio.ended) {
                        resolve();
                    } else {
                        audio.addEventListener('ended', resolve, { once: true });
                    }
                });
            }

            scrollToElement(element, offset = 100) {
                if (!element) return;
                const rect = element.getBoundingClientRect();
                const absoluteTop = window.pageYOffset + rect.top - offset;
                window.scrollTo({
                    top: absoluteTop,
                    behavior: 'smooth'
                });
            }

            activateStep(index) {
                // Update flow steps
                this.elements.steps.forEach((step, i) => {
                    step.classList.remove('active');
                    if (i < index) step.classList.add('completed');
                    if (i === index) step.classList.add('active');
                });

                // Update timeline
                this.elements.timelineDots.forEach((dot, i) => {
                    dot.classList.remove('active');
                    if (i < index) dot.classList.add('completed');
                    if (i === index) dot.classList.add('active');
                });
            }

            activateArrow(index) {
                if (this.elements.arrows[index]) {
                    this.elements.arrows[index].classList.add('active');
                }
            }

            updateStatus(text, progress) {
                this.elements.statusText.textContent = text;
                this.elements.statusFill.style.width = `${progress}%`;
            }

            createParticle() {
                const particle = document.createElement('div');
                particle.className = 'particle active';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.background = Math.random() > 0.5 ? 'var(--color-primary)' : 'var(--color-secondary)';
                this.elements.particles.appendChild(particle);

                setTimeout(() => particle.remove(), 2000);
            }

            celebrate() {
                this.elements.celebration.classList.add('active');

                const colors = ['#ff25bd', '#3b82f6', '#34d399', '#f59e0b'];
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti active';
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    this.elements.celebration.appendChild(confetti);
                }

                setTimeout(() => {
                    this.elements.celebration.classList.remove('active');
                    this.elements.celebration.innerHTML = '';
                }, 3000);
            }

            reset() {
                this.isRunning = false;
                this.audioPlaying = false;
                this.elements.startBtn.disabled = false;
                this.elements.startBtnText.textContent = 'Start Demo';

                // Stop and reset narration audio
                this.elements.narrationAudio.pause();
                this.elements.narrationAudio.currentTime = 0;

                // Reset visibility
                this.elements.emailPanel.classList.remove('visible');
                this.elements.resultsPanel.classList.remove('visible');
                this.elements.document.classList.remove('visible', 'scanning');
                this.elements.scanLine.classList.remove('active');
                this.elements.aiRings.classList.remove('visible');
                this.elements.aiLabels.classList.remove('visible');
                this.elements.dashboardPreview.classList.remove('visible');

                // Reset steps
                this.elements.steps.forEach(step => {
                    step.classList.remove('active', 'completed');
                });

                this.elements.arrows.forEach(arrow => {
                    arrow.classList.remove('active');
                });

                this.elements.timelineDots.forEach(dot => {
                    dot.classList.remove('active', 'completed');
                });

                // Reset data items
                this.elements.dataItems.forEach(item => {
                    item.classList.remove('visible', 'highlight');
                });

                // Reset findings
                this.elements.findings.forEach(finding => {
                    finding.classList.remove('visible');
                });

                // Reset status
                this.updateStatus('Click "Start Demo" to begin', 0);
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize demo
        document.addEventListener('DOMContentLoaded', () => {
            new EmailDemo();
        });
    </script>
</body>
</html>
